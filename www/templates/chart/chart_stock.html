{% extends "chart/base_chart.html" %}
{% load custom_tags %}
{% load custom_filters %}

{% block title %}个股数据{% endblock %}

{% block javascript %}
<script type="text/javascript">
var echarts,
	ecConfig,

	clickFun = function(param){
		var stockCode = param.name.split('(')[1].split(')')[0];
		window.open('/stock/' + stockCode, '_blank');
	},
	
	// 今日个股成交额环比
	renderChain = function(){
		var chainChart = echarts.init(document.getElementById('chain'));

		chainChart.setOption({
			title: {
				text: '今日个股成交额环比增长率前10'
			},
		    tooltip : {
		        trigger: 'axis',
		        formatter: '<b>{b}</b><br/>{a}: {c} %<br/>点击查看该股历史成交额环比'
		    },
		    legend: {
		        data:['成交额环比增长率'],
		        orient: 'horizontal',
				x: 'right',
				padding: [5, 40, 0, 0]
		    },
		    toolbox: {
		        show : true,
		        feature : {
		            saveAsImage : {show: true}
		        }
		    },
			calculable : false,
			xAxis : [{
		        type : 'value',
		        splitArea : {show : false}
		    }],
		    yAxis : [{
		    	type : 'category',
		    	axisLabel: {
		    		formatter: function(v){
		    			return v.split('(')[0]
		    		}
		    	},
		        data : [
		        	'盾安环境(000413)', '招商银行(600110)', '工商银行(600056)', '三一重工(600880)', 
		        	'得利股份(600750)', '台基股份(600166)', '建设银行(600200)', '江中药业(600501)', 
		        	'华润双鹤(600503)', '天龙光电(600804)'
		        ]
		        
		    }],
		    color: ['#428bca', '#428bca'],
		    series : [{
		        name:'成交额环比增长率',
		        type:'bar',
		        itemStyle: {
		        	normal: {
		        		label: {
		        			show: true,	// 每行数值
		        			position: 'right',
		        			formatter: "{c} %"
		        		}
		        	}
		        },
		        data: (function(){
		        	var d = [];

		        	_.map(_.range(0, 10), function(){
		        		d.push(Math.round(Math.random() * 10000) / 100)
		        	})

		        	return d.sort(function(a, b){ return a-b});
		        })()
		    }]
		});

		chainChart.on(ecConfig.EVENT.CLICK, clickFun);
	},
	renderChainInTotal = function(){
		var chainInTotalChart = echarts.init(document.getElementById('chain_in_total'));

		chainInTotalChart.setOption({
			title: {
				text: '今日个股成交额占沪深总成交额环比增长率前10'
			},
		    tooltip : {
		        trigger: 'axis',
		        formatter: '<b>{b}</b><br/>{a}: {c} %<br/>点击查看该股历史成交额环比'
		    },
		    legend: {
		        data:['成交额环比增长率'],
		        orient: 'horizontal',
				x: 'right',
				padding: [5, 40, 0, 0]
		    },
		    toolbox: {
		        show : true,
		        feature : {
		            saveAsImage : {show: true}
		        }
		    },
			calculable : false,
			xAxis : [{
		        type : 'value',
		        splitArea : {show : false}
		    }],
		    yAxis : [{
		    	type : 'category',
		    	axisLabel: {
		    		formatter: function(v){
		    			return v.split('(')[0]
		    		}
		    	},
		        data : [
		        	'盾安环境(000413)', '招商银行(600110)', '工商银行(600056)', '三一重工(600880)', 
		        	'得利股份(600750)', '台基股份(600166)', '建设银行(600200)', '江中药业(600501)', 
		        	'华润双鹤(600503)', '天龙光电(600804)'
		        ]
		        
		    }],
		    color: ['#428bca', '#428bca'],
		    series : [{
		        name:'成交额环比增长率',
		        type:'bar',
		        itemStyle: {
		        	normal: {
		        		label: {
		        			show: true,	// 每行数值
		        			position: 'right',
		        			formatter: "{c} %"
		        		}
		        	}
		        },
		        data: (function(){
		        	var d = [];

		        	_.map(_.range(0, 10), function(){
		        		d.push(Math.round(Math.random() * 10000) / 100)
		        	})

		        	return d.sort(function(a, b){ return a-b});
		        })()
		    }]
		});

		chainInTotalChart.on(ecConfig.EVENT.CLICK, clickFun);
	};

require(
	[
		"echarts", 
		"echarts/chart/line", 
		"echarts/chart/bar"
	],
	function(ec){
		echarts = ec;
		renderChain();
		renderChainInTotal();
	}
);
ecConfig = require('echarts/config');

$(document).ready(function(){

});

</script>
{% endblock %}

{% block css %}
<style type="text/css">

</style>
{% endblock %}

{% block chart_main%}
<div class="col-md-10 col-xs-12 pb-10">
	<div class="bottom-border bdc-bbb pt-10 pb-5 pl-10">
		<span class="f15 fb">个股数据</span>
		<span class="co8 pl-5 pr-5">|</span>
		<a href="/stock/chart_industry"><span class="f15 fb">行业数据</span></a>
	</div>
</div>
<ul class="list-inline col-md-10 col-xs-12 pt-20 pb-10">
	<li>
		<a class="active border-block-blue ml-5 pl-10 pr-10 pt-3 pb-3" href="/topics">全部</a>
	</li>
	<li>
		<a class="border-block-blue ml-5 pl-10 pr-10 pt-3 pb-3" href="/topics">0-50亿市值</a>
	</li>
	<li>
		<a class="border-block-blue ml-5 pl-10 pr-10 pt-3 pb-3" href="/topics">50-100亿市值</a>
	</li>
	<li>
		<a class="border-block-blue ml-5 pl-10 pr-10 pt-3 pb-3" href="/topics">100-200亿市值</a>
	</li>
	<li>
		<a class="border-block-blue ml-5 pl-10 pr-10 pt-3 pb-3" href="/topics">200-300亿市值</a>
	</li>
	<li>
		<a class="border-block-blue ml-5 pl-10 pr-10 pt-3 pb-3" href="/topics">300亿市值以上</a>
	</li>
</ul>
<div class="col-md-10 min-h400 col-xs-12 pt-10" id="chain">
</div>

<div class="col-md-10 min-h400 col-xs-12 pt-10" id="chain_in_total">
</div>

{% endblock %}